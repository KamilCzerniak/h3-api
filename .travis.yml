language: java
jdk:
- openjdk8
services:
- docker
before_install:
- docker pull openjdk:8-jre-alpine
before_script: cd server
script:
- mvn test
- mvn clean package
after_success:
- if [[ ! -z "$TRAVIS_TAG" ]]; fi
- docker-compose build
- docker login --username $DOCKER_USER --password $DOCKER_PASS
- docker tag $IMAGE_NAME:latest $IMAGE_NAME:$TRAVIS_TAG
- docker push $IMAGE_NAME:$TRAVIS_TAG
env:
  global:
  - secure: Y7TtuSLomj0QGnweRSFVDH4daGsNyWPeLGIPPDWpdnBNmVJwQQlPCbBTk8r3B08EAuHGaEvc5tB+D6INTyFvR1IoOw+nC6TDyL+ER/xyaQ0ezeL5ujtwuzb8/nrPrv/xIbh6GXq3KBrMNO+5RSFPcM07YHO1b3T/hbLF9ejAKzN6oO09pNoCG8/5ZdrAgS4V9ZNPQAbNJ0dvsLAxP1bPWMlGr5swMewoh1TLd9LTcHhLsVxweEvcBqvfQJfw0Ny+wBkEqMCQlWGvjseseoyKHAlJffntg6mzslAcXd6OswXG8Y1S+4OjpmASICtOmgSq6rPmute8FWVM906R5zG4wng3h8SAeQ2eCYvCpfF700laej3ViTycTQOhlznQ7XEwXCsrCp/r7EK//iiEfgilrn66EJaUbg9iTJC2ns8xcte5gNeeztEME677I4P8PlBUoa7Sj51sTTn7YoshBZg646Rna0BpknLQFOMSp4U/q9mlfUKtPuqgv62Gls36YjEa2vlOficwkHokvBGISnl2MSQCOmHirnYHBairgiFcGqxDIUPJmHB8eb0bNNNur7L+cZxFFkD3W+m89tSF0sr6XuCI+rHn6jAWS808KJ/4eaFRicFmFvy9d1zESyXHViejCSJriJm59vPCOBcyRAn/PPtOppTrrZbfuyHcC5/Mdg8=
  - secure: X7yD9P3Zbtlc+kyJga7uQ7D+XR6tVa+PEuGYh52orUgH0Wejk9dl2CkH2er9Q5BFHABYlSIuFnyAKIc5gFWdhGkffA9uLLmBvfSDyPHZmOGFL0satkI6nuRQJHgqxtxNWKkGZI8B8UMUT+UDZ/O503QUQrefc9EJ1siXcvbMbz06YD22i4Jk0cFsNi34Mg4IrY7fhe6sDETBMRd1mXScuJFLaZnRkOd34sR4F0pKzTV1P7v2xEYM4bmZTgPmLd1i2uJ7hoOV8T/CiDsOPYljzMc9ZTUH9kxr6UQ3lva+FEG7liz/eiCtaJ6/Xl+KZQoK9lkOVgzoXmMNuoZjAhw9sqLsGHR6Z60FecAY3G8o1F0LlLV/2oEJZAgE9UxLmxgrV0uAOzXLqE2N8SpIB4WGCCdiyu3Lbf74WpsMIzmXTD+WchTWXH6SwzqY/x3srnkNZK8KjgXoftFQkbLE8sqltKm9NZsJpu2ZmrLOD+R2EZmrTooCg724mxjaUdYCA7GTOv0TQXx/lnGRQatMYfEKY5b3GUbBNM02wudSzry3nSalEN3+2/yMlGBJZecsZElEH3C2/by1MWDpI2nEFeE10jQuc7Xu9xvQ+vNn9ffxu9Xda87YjPIgY4suLSVrBG/+lKxQyGnACEIRGFMcDjCjHa8kbNgcpha+Br/vk148Rvw=
  - secure: fm+Qf3p38snFzYB744fIiLyRmUmyBvZTSPFL82GH8ovZ8+FC2RlAbwpWdXZj1NiHBg+JiBDxCv6WhCV3wnrif0mT46Fr3zzorpVzvyVH4rYwMavxeOLCGnh2o4/ezqOo8tiTN6OQHyPRPb90g/z/9/pWHUvhxb+qGs0kTH2shGE2ib2z+dywOEX61RuY7J6FySejV+qNjW/7xJhla7cvk3VQuoA2DRfbWoWL4nrzZvsF7Q7HoOwGGORjUwspv47r47hG1xoo/QzzjTCnG60mpOHOQb0462DTh5PnY5JnsB5dmN3jCpyO/RSi3V2thNVw0jmwVDr/afxI6vIb3cl4R5Hyg5jn0rzFYvxy+SUrg+lnf8+AzoM7qrwi7UtC2TwsMywy6PgXCGGDFs2VcDI13Mj6ZnZv5fgPbiw2nEwfdQv0zts8K73H9WJhcUq8QOF47COGVJVfS28w1rZtsUKjoTWPW+bPVWAiqD5n0GmSVgcE8reOPP2MrIYVDaW97/6RidN8NXGsnfA37A3/D8b8vuKv1I3IgLTLhkXpR+hVLVz9RCVj7J6C9DMMhH1lA+//3BZMiGeoN8f89sFX1xzahkWupJOImsYvhmoQWGMDqPgTzxfqXZpL+VNcyLxYZAJMb+h4HEJt+dyH3Y74SMgbYsaMkH8xJIo4iH4QwXXq1wE=
